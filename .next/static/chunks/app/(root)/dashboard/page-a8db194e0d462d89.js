(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[803],{4638:(e,t,l)=>{Promise.resolve().then(l.bind(l,9796))},6654:(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return s}});let r=l(2115);function s(e,t){let l=(0,r.useRef)(null),s=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=l.current;e&&(l.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(l.current=n(e,r)),t&&(s.current=n(t,r))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let l=e(t);return"function"==typeof l?l:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9796:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>d});var r=l(5155),s=l(6766);function n(){return(0,r.jsxs)("div",{className:"flex flex-col justify-between py-10  bg-white/30 backdrop-blur-md h-screen border-r-2 border-r-white p-4 ",children:[(0,r.jsxs)("div",{className:"flex flex-col   ",children:[(0,r.jsx)(s.default,{alt:"logo",width:50,height:50,src:"/logo.png"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-800 mt-6",children:" Asong  "})]}),(0,r.jsx)("div",{className:"flex items-center  hover:bg-white/10 rounded-full justify-center w-full    gap-3 text-white/60 text-sm p-2 mt-2 coursor-pointer"})]})}var a=l(2115),o=l(4626);function i(){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6  cursor-pointer",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})})}var u=l(3568);let c=e=>{let{isLoading:t,setIsLoading:l,prompts:s,setPrompts:n}=e,[o,c]=(0,a.useState)(""),d=(0,a.useRef)(null),f=(0,a.useRef)(null);(0,a.useEffect)(()=>{d.current&&(d.current.style.height="auto",d.current.style.height="".concat(Math.min(d.current.scrollHeight,200),"px"))},[o]),(0,a.useEffect)(()=>{var e;null===(e=f.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[s]);let p=async e=>{if(e.preventDefault(),!o.trim()||t)return;let r=[...s,{role:"user",content:o.trim()}];n(r),c(""),l(!0);try{let e=await fetch("/api/ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompts:r})});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();if(!t.success)throw Error(t.error);n(e=>[...e,{role:"assistant",content:t.data.content}])}catch(e){console.error("API Error:",e),n(s),u.Ay.error(e instanceof Error?e.message:"Failed to get AI response")}finally{var a;l(!1),null===(a=d.current)||void 0===a||a.focus()}};return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("form",{onSubmit:p,className:"w-full ".concat(s.length>1?"lg:max-w-3xl":"lg:max-w-2xl"," bg-white/10 backdrop-blur-md drop-shadow-lg border-white border-2 rounded-3xl lg:mt-4 transition-all shadow-2xs p-4"),children:(0,r.jsxs)("div",{className:"flex items-end gap-2",children:[(0,r.jsx)("textarea",{ref:d,className:"outline-none overflow-hidden resize-none bg-transparent break-words w-full max-h-[200px]",rows:1,placeholder:"Type here your fav lyrics",onChange:e=>c(e.target.value),value:o,disabled:t,"aria-label":"Type your message",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),p(e))}}),(0,r.jsx)("button",{className:"flex-shrink-0 ".concat(s.length>1?"bg-purple-800 text-white hover:bg-purple-700":"bg-purple-200 text-purple-800 hover:bg-purple-300"," p-2 rounded-full transition-colors disabled:opacity-50"),type:"submit",disabled:t||!o.trim(),"aria-label":"Send message",children:(0,r.jsx)(i,{})})]})}),(0,r.jsx)("div",{ref:f,"aria-hidden":"true"})]})};function d(){let[e,t]=(0,a.useState)([]),[l,i]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"flex w-full bg-gradient-to-r from-indigo-100 via-purple-100 to-pink-100",children:[(0,r.jsx)("div",{className:"left-0 sticky lg:mr-96",children:(0,r.jsx)(n,{})}),(0,r.jsxs)("div",{className:"flex flex-col w-full px-5 justify-center",children:[0===e.length?(0,r.jsxs)("div",{className:"justify-center md:mx-40  lg:mx-80",children:[(0,r.jsx)(o.P.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{duration:.4,scale:{type:"spring",visualDuration:.4,bounce:.5}},className:"flex rounded-full",children:(0,r.jsx)(s.default,{alt:"pic",className:"flex justify-center rounded-full outline-1 md:mr-30 lg:mr-72 outline-purple-300 border-2 border-purple-200 bg-purple-100 p-1",width:60,height:60,src:"/logo.png"})}),(0,r.jsx)(o.P.p,{animate:{scale:1.2},className:"flex justify-start lg:mr-40 text-3xl text-purple-800 font-bold mt-1.5",children:"Asong"})]}):(0,r.jsxs)("div",{className:"flex flex-col space-y-1 overflow-y-auto h-96",children:[(0,r.jsx)("div",{className:" justify-start p-2 lg:mr-96 text-2xl font-sans text-gray-500 font-semibold rounded-full bg-blue-200",children:" Type your favourite lyrics to get know your inner thoughts  "}),(0,r.jsx)("div",{className:"flex flex-col w-full justify-center scroll-mt-32 md:scroll-mt-36  lg:scroll-mt-48 ",children:e.map((e,t)=>(0,r.jsxs)("div",{className:"flex ",children:["assistant"===e.role&&(0,r.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-200"}),(0,r.jsx)("div",{className:"px-4 py-2 text-lg font-semibold  my-2 rounded-2xl max-w-[80%] hover:scale-50 ".concat("user"===e.role?"bg-gray-200":"bg-blue-200"),children:(0,r.jsx)("p",{className:"text-md text-gray-500 p-2 tracking-wide",children:e.content})}),"user"===e.role&&(0,r.jsx)("div",{className:" rounded-full bg-gray-200 flex items-center"})]},t))})]}),(0,r.jsx)("div",{className:" sticky",children:(0,r.jsx)(c,{setIsLoading:i,setPrompts:t,prompts:e,isLoading:l})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[39,568,441,684,358],()=>t(4638)),_N_E=e.O()}]);