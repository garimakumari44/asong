(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[803],{4638:(e,t,r)=>{Promise.resolve().then(r.bind(r,9796))},6654:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return s}});let l=r(2115);function s(e,t){let r=(0,l.useRef)(null),s=(0,l.useRef)(null);return(0,l.useCallback)(l=>{if(null===l){let e=r.current;e&&(r.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(r.current=n(e,l)),t&&(s.current=n(t,l))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9796:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var l=r(5155),s=r(6766);function n(){return(0,l.jsxs)("div",{className:"flex flex-col justify-between py-10  bg-white/30 backdrop-blur-md h-screen border-r-2 border-r-white p-4 ",children:[(0,l.jsxs)("div",{className:"flex flex-col   ",children:[(0,l.jsx)(s.default,{alt:"logo",width:50,height:50,src:"/logo.png"}),(0,l.jsx)("div",{className:"text-2xl font-bold text-purple-800 mt-6",children:" Asong  "})]}),(0,l.jsx)("div",{className:"flex items-center  hover:bg-white/10 rounded-full justify-center w-full    gap-3 text-white/60 text-sm p-2 mt-2 coursor-pointer"})]})}var o=r(2115),a=r(4626);function i(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6  cursor-pointer",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})})}var u=r(3568);let c=e=>{let{isLoading:t,setIsLoading:r,prompts:s,setPrompts:n}=e,[a,c]=(0,o.useState)(""),d=(0,o.useRef)(null),f=(0,o.useRef)(null);(0,o.useEffect)(()=>{d.current&&(d.current.style.height="auto",d.current.style.height="".concat(Math.min(d.current.scrollHeight,200),"px"))},[a]),(0,o.useEffect)(()=>{var e;null===(e=f.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[s]);let p=async e=>{var l,o;if(e.preventDefault(),!a.trim()||t)return;let i=[...s,{role:"user",content:a.trim()}];n(i),c(""),r(!0);try{let e=await fetch("/api/ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompts:i})});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();if(!t.success||!(null===(l=t.data)||void 0===l?void 0:l.content))throw Error(t.error||"No content in AI response");n(e=>[...e,{role:"assistant",content:t.data.content}])}catch(e){console.error("API Error:",e),n(s),u.Ay.error(e instanceof Error?e.message:"Failed to get AI response")}finally{r(!1),null===(o=d.current)||void 0===o||o.focus()}};return(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("form",{onSubmit:p,className:"w-full ".concat(s.length>1?"max-w-3xl":"max-w-2xl"," bg-white/10 backdrop-blur-md drop-shadow-lg border-white border-2 rounded-3xl mt-4 transition-all shadow-2xs p-4"),children:(0,l.jsxs)("div",{className:"flex items-end gap-2",children:[(0,l.jsx)("textarea",{ref:d,className:"outline-none overflow-hidden resize-none bg-transparent break-words w-full max-h-[200px]",rows:1,placeholder:"Type here your fav lyrics",onChange:e=>c(e.target.value),value:a,disabled:t,"aria-label":"Type your message",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),p(e))}}),(0,l.jsx)("button",{className:"flex-shrink-0 ".concat(s.length>1?"bg-purple-800 text-white hover:bg-purple-700":"bg-purple-200 text-purple-800 hover:bg-purple-300"," p-2 rounded-full transition-colors disabled:opacity-50"),type:"submit",disabled:t||!a.trim(),"aria-label":"Send message",children:(0,l.jsx)(i,{})})]})}),(0,l.jsx)("div",{ref:f,"aria-hidden":"true"})]})};function d(){let[e,t]=(0,o.useState)([]),[r,i]=(0,o.useState)(!1);return(0,l.jsxs)("div",{className:"flex w-full bg-gradient-to-r from-indigo-100 via-purple-100 to-pink-100",children:[(0,l.jsx)("div",{className:"left-0 sticky lg:mr-96",children:(0,l.jsx)(n,{})}),(0,l.jsxs)("div",{className:"flex flex-col w-full px-5 justify-center",children:[0===e.length?(0,l.jsxs)("div",{className:"justify-center md:mx-40  lg:mx-80",children:[(0,l.jsx)(a.P.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{duration:.4,scale:{type:"spring",visualDuration:.4,bounce:.5}},className:"flex rounded-full",children:(0,l.jsx)(s.default,{alt:"pic",className:"flex justify-center rounded-full outline-1 md:mr-30 lg:mr-72 outline-purple-300 border-2 border-purple-200 bg-purple-100 p-1",width:60,height:60,src:"/logo.png"})}),(0,l.jsx)(a.P.p,{animate:{scale:1.2},className:"flex justify-start lg:mr-40 text-3xl text-purple-800 font-bold mt-1.5",children:"Asong"})]}):(0,l.jsxs)("div",{className:"flex flex-col space-y-1 overflow-y-auto h-96",children:[(0,l.jsx)("div",{className:" justify-start p-2 lg:mr-96 text-2xl font-sans text-gray-500 font-semibold rounded-full bg-blue-200",children:" Type your favourite lyrics to get know your inner thoughts  "}),(0,l.jsx)("div",{className:"flex flex-col w-full justify-center scroll-mt-32 md:scroll-mt-36  lg:scroll-mt-48 ",children:e.map((e,t)=>(0,l.jsxs)("div",{className:"flex ",children:["assistant"===e.role&&(0,l.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-200"}),(0,l.jsx)("div",{className:"px-4 py-2 text-lg font-semibold  my-2 rounded-2xl max-w-[80%] hover:scale-50 ".concat("user"===e.role?"bg-gray-200":"bg-blue-200"),children:(0,l.jsx)("p",{className:"text-md text-gray-500 p-2 tracking-wide",children:e.content})}),"user"===e.role&&(0,l.jsx)("div",{className:" rounded-full bg-gray-200 flex items-center"})]},t))})]}),(0,l.jsx)("div",{className:" sticky",children:(0,l.jsx)(c,{setIsLoading:i,setPrompts:t,prompts:e,isLoading:r})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[39,568,441,684,358],()=>t(4638)),_N_E=e.O()}]);