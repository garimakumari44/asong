(()=>{var e={};e.id=700,e.ids=[700],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69281:(e,r,s)=>{"use strict";s.r(r),s.d(r,{patchFetch:()=>m,routeModule:()=>u,serverHooks:()=>d,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>l});var t={};s.r(t),s.d(t,{POST:()=>p});var o=s(96559),n=s(48088),a=s(37719),i=s(32190);async function p(e){try{let r=await e.json();if(!r.prompts||!Array.isArray(r.prompts))return i.NextResponse.json({error:"Prompts must be an array"},{status:400});let s=[];for(let e of r.prompts){if("object"!=typeof e||!e.role||!e.content)return i.NextResponse.json({error:"Each message must have {role, content}"},{status:400});if(!["user","assistant","system"].includes(e.role))return i.NextResponse.json({error:"Role must be user, assistant, or system"},{status:400});s.push({role:e.role,content:String(e.content)})}let t=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${process.env.OPENROUTER_API_KEY}`,"Content-Type":"application/json","HTTP-Referer":process.env.SITE_URL||"","X-Title":process.env.SITE_NAME||""},body:JSON.stringify({model:"deepseek/deepseek-r1:free",messages:s})});if(!t.ok){let e=await t.json();return console.error("OpenRouter Error:",e),i.NextResponse.json({success:!1,message:e.error?.message||"OpenRouter API error"},{status:t.status})}let o=await t.json(),n={role:"assistant",content:o.choices?.[0]?.message?.content||"No response from AI"};return i.NextResponse.json({success:!0,data:n})}catch(e){return console.error("Server Error:",e),i.NextResponse.json({success:!1,message:e instanceof Error?e.message:"Internal server error"},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/ai/route",pathname:"/api/ai",filename:"route",bundlePath:"app/api/ai/route"},resolvedPagePath:"C:\\asong\\asong\\src\\app\\api\\ai\\route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:c,workUnitAsyncStorage:l,serverHooks:d}=u;function m(){return(0,a.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:l})}},78335:()=>{},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[243,580],()=>s(69281));module.exports=t})();