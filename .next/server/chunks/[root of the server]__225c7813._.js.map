{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file://C%3A/asong/asong/src/models/chat.ts"],"sourcesContent":["import { timeStamp } from \"console\";\r\nimport mongoose from \"mongoose\";\r\n\r\nconst ChatSchema = new mongoose.Schema(\r\n    {\r\n        name: {type: String, required: true},\r\n        messages: [\r\n            {\r\n                role: {type: String, required: true},\r\n                content: {type: String, required: true},\r\n                timestamp: {type: Number, required: true},\r\n\r\n\r\n            }\r\n        ]\r\n\r\n    },  {\r\n        timestamps: true\r\n    }\r\n)\r\n\r\n\r\n\r\n export const Chat = mongoose.models.Chat || mongoose.model('Chat', ChatSchema)"],"names":[],"mappings":";;;AACA;;AAEA,MAAM,aAAa,IAAI,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAClC;IACI,MAAM;QAAC,MAAM;QAAQ,UAAU;IAAI;IACnC,UAAU;QACN;YACI,MAAM;gBAAC,MAAM;gBAAQ,UAAU;YAAI;YACnC,SAAS;gBAAC,MAAM;gBAAQ,UAAU;YAAI;YACtC,WAAW;gBAAC,MAAM;gBAAQ,UAAU;YAAI;QAG5C;KACH;AAEL,GAAI;IACA,YAAY;AAChB;AAKI,MAAM,OAAO,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,yGAAA,CAAA,UAAQ,CAAC,KAAK,CAAC,QAAQ","debugId":null}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file://C%3A/asong/asong/src/app/api/ai/route.ts"],"sourcesContent":["import { Chat } from \"@/models/chat\";\r\nimport { NextRequest, NextResponse } from \"next/server\";\r\nimport axios from 'axios';\r\n\r\n\r\nif(!process.env.DEEPSEEK_API_KEY) {\r\n  throw new Error(\"Deepseek api is not working\")\r\n}\r\n\r\n\r\n\r\nexport async function POST(req: NextRequest) {\r\n \r\n       \r\n\r\n        try {\r\n\r\n       \r\n          const { chatId, prompt } = await req.json();\r\n          \r\n        \r\n          const chat = await Chat.findOne({  _id: chatId });\r\n          if (!chat) {\r\n            return NextResponse.json(\r\n              { success: false, message: \"Chat not found\" },\r\n              { status: 404 }\r\n            );\r\n          }\r\n        \r\n          // Save user message\r\n          const userPrompt = {\r\n            role: \"user\",\r\n            content: prompt,\r\n            timestamp: Date.now(),\r\n          };\r\n          chat.messages.push(userPrompt);\r\n          await chat.save();\r\n        \r\n          // Get AI response\r\n          const response = await axios.post(\r\n            \"https://openrouter.ai/api/v1/chat/completions\",\r\n            {\r\n              model: \"deepseek/deepseek-r1:free\",\r\n              messages: [{ role: \"user\", content: prompt }],\r\n            },\r\n            {\r\n              headers: {\r\n                Authorization: process.env.DEEPSEEK_API_KEY,\r\n                \"Content-Type\": \"application/json\",\r\n              },\r\n            }\r\n          );\r\n        \r\n          // Save AI response\r\n          const aiMessage = {\r\n            role: \"assistant\",\r\n            content: response.data.choices[0].message.content || \"No Response\",\r\n            timestamp: Date.now(),\r\n          };\r\n          chat.messages.push(aiMessage);\r\n          await chat.save();\r\n        \r\n          return NextResponse.json({ success: true, data: aiMessage });\r\n        } catch (error) {\r\n          console.error(\"Error:\", error);\r\n          return NextResponse.json(\r\n            { success: false, message: \"Internal server error\" },\r\n            { status: 500 }\r\n          );\r\n        }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;AAAA;AACA;AACA;;;;AAGA,IAAG,CAAC,QAAQ,GAAG,CAAC,gBAAgB,EAAE;IAChC,MAAM,IAAI,MAAM;AAClB;AAIO,eAAe,KAAK,GAAgB;IAInC,IAAI;QAGF,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,IAAI;QAGzC,MAAM,OAAO,MAAM,uHAAA,CAAA,OAAI,CAAC,OAAO,CAAC;YAAG,KAAK;QAAO;QAC/C,IAAI,CAAC,MAAM;YACT,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,SAAS;YAAiB,GAC5C;gBAAE,QAAQ;YAAI;QAElB;QAEA,oBAAoB;QACpB,MAAM,aAAa;YACjB,MAAM;YACN,SAAS;YACT,WAAW,KAAK,GAAG;QACrB;QACA,KAAK,QAAQ,CAAC,IAAI,CAAC;QACnB,MAAM,KAAK,IAAI;QAEf,kBAAkB;QAClB,MAAM,WAAW,MAAM,uIAAA,CAAA,UAAK,CAAC,IAAI,CAC/B,iDACA;YACE,OAAO;YACP,UAAU;gBAAC;oBAAE,MAAM;oBAAQ,SAAS;gBAAO;aAAE;QAC/C,GACA;YACE,SAAS;gBACP,eAAe,QAAQ,GAAG,CAAC,gBAAgB;gBAC3C,gBAAgB;YAClB;QACF;QAGF,mBAAmB;QACnB,MAAM,YAAY;YAChB,MAAM;YACN,SAAS,SAAS,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO,IAAI;YACrD,WAAW,KAAK,GAAG;QACrB;QACA,KAAK,QAAQ,CAAC,IAAI,CAAC;QACnB,MAAM,KAAK,IAAI;QAEf,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,MAAM;QAAU;IAC5D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,UAAU;QACxB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,SAAS;QAAwB,GACnD;YAAE,QAAQ;QAAI;IAElB;AACR","debugId":null}}]
}